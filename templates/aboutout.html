<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>About | Dear, You</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
<style>
/* --- About Page Specific Styles --- */
.main-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 50px 30px;
    gap: 20px;
}

.about-box {
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    border: 1px solid var(--border);
    padding: 30px;
    max-width: 700px;
    text-align: center;
    backdrop-filter: blur(10px);
}

.about-box h2 {
    font-family: 'Playfair Display', serif;
    color: var(--accent-dark);
    margin-bottom: 20px;
}

.about-box p {
    font-size: 1rem;
    color: var(--text-main);
    line-height: 1.8;
    margin-bottom: 15px;
}

.back-btn {
    display: inline-block;
    background: var(--accent);
    color: #fff;
    padding: 8px 18px;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 700;
    transition: background 0.2s ease, transform 0.2s ease;
}

.back-btn:hover {
    background: var(--accent-dark);
    transform: scale(1.05);
}
</style>
</head>
<body>
<header>
    <h1>DEAR, YOU_</h1>
    <div class="line"></div>
    <p class="subtext">digital love letters</p>
    <div class="auth-buttons">
        <button onclick="openModal('login')">Login</button>
        <button onclick="openModal('signup')">Sign Up</button>
    </div>
</header>

<div class="main-container">
    <!-- Back Button -->
    <div style="width: 100%; max-width: 700px; text-align: left;">
        <a href="{{ url_for('index') }}" class="back-btn">← Back</a>
    </div>

    <!-- About Content -->
    <div class="about-box">
        <h2>About Us</h2>
        <p>
            Dear, You is a digital platform dedicated to the art of heartfelt correspondence. 
            We provide a safe, elegant space for individuals to write, share, and engage with personal letters. 
            Our platform encourages thoughtful reflection, creative expression, and meaningful connections. 
            In a world dominated by quick messages and fleeting conversations, Dear, You seeks to restore the value of deliberate, intentional communication.
        </p>

        <h2>Our Mission</h2>
        <p>
            Our mission is to cultivate a community where words carry depth and emotion. 
            We aim to empower our users to express themselves authentically, share their stories, and connect with others on a profound level. 
            By offering a platform that celebrates sincerity and vulnerability, we hope to inspire empathy, kindness, and understanding among individuals from diverse backgrounds.
        </p>

        <h2>Our Vision</h2>
        <p>
            We envision a world where digital communication can be both meaningful and memorable. 
            By nurturing the timeless practice of letter writing in the digital age, we aspire to create a space where personal reflection and genuine human connection are valued above brevity and speed. 
            Our goal is to foster lasting relationships, encourage thoughtful expression, and remind people of the enduring power of words to heal, inspire, and unite.
        </p>
    </div>

</div>

<!-- AUTH MODAL -->
<div class="auth-modal" id="authModal">
    <div class="auth-box">
        <h2 id="authTitle">Login</h2>
        <form id="authForm" method="POST">
            <!-- Fields will be injected by JS -->
        </form>
        <div id="errorMessage" style="margin-top:10px; color:red; font-size:0.9rem;">
            {% if error %}
                {{ error }}
            {% endif %}
        </div>
        <div id="toggleContainer" style="margin-top:15px; font-size:0.9rem; color:var(--text-main);"></div>
    </div>
</div>

<script>
function openModal(mode) {
    const modal = document.getElementById('authModal');
    const title = document.getElementById('authTitle');
    const form = document.getElementById('authForm');
    const toggleContainer = document.getElementById('toggleContainer');
    const errorMessage = document.getElementById('errorMessage');

    modal.style.display = 'flex';

    // Keep any server-side error if exists
    let serverError = errorMessage.textContent;

    if (mode === 'login') {
        title.textContent = 'Login';
        form.action = '/login';
        form.innerHTML = `
            <input type="email" name="email" placeholder="Email" required />
            <input type="password" name="password" placeholder="Password" required />
            <button type="submit">Continue</button>
        `;
        toggleContainer.innerHTML = `Don’t have an account? <a href="#" onclick="switchAuth('signup')">Sign Up</a>`;
    } else if (mode === 'signup') {
        title.textContent = 'Sign Up';
        form.action = '/signup';
        form.innerHTML = `
            <input type="email" name="email" placeholder="Email" required />
            <input type="password" name="password" placeholder="Password" required />
            <button type="submit">Create Account</button>
        `;
        toggleContainer.innerHTML = `Already have an account? <a href="#" onclick="switchAuth('login')">Login</a>`;
    }

    // Restore server-side error if present
    if (serverError) {
        errorMessage.textContent = serverError;
    }
}

function switchAuth(mode) {
    openModal(mode);
}

// Clicking outside the modal closes it
window.addEventListener('click', function(e) {
    const modal = document.getElementById('authModal');
    if (e.target === modal) {
        modal.style.display = 'none';
        // Clear error when closing
        document.getElementById('errorMessage').textContent = '';
    }
});

// Open modal automatically if server tells us to (e.g., after redirect with error)
{% if show_modal %}
openModal("{{ form_mode }}");
{% endif %}
</script>
</body>
</html>
